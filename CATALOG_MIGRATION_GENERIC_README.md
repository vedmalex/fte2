# Generic Catalog Migration Script v2.0

## –ü—Ä–æ–±–ª–µ–º—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `migrate-to-catalog.js` –∏–º–µ–ª —Å–ª–µ–¥—É—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

### ‚ùå –ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–¥–µ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª–∞
- –ü—Ä–æ—Å—Ç–æ–µ `includes()` matching –¥–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

### ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ workspace —Å—Ç—Ä—É–∫—Ç—É—Ä
- –¢–æ–ª—å–∫–æ `apps/*/package.json` –∏ `packages/*/package.json`
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (tools, libs, etc.)

### ‚ùå –ü—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π
- –í—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—É—é –≤–µ—Ä—Å–∏—é –∏–∑ —Å–ø–∏—Å–∫–∞
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É –≤–µ—Ä—Å–∏–π (^1.2.3 vs ~1.2.3)

### ‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç peerDeps, optionalDeps, bundledDeps
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ

## ‚úÖ –†–µ—à–µ–Ω–∏—è –≤ Generic –≤–µ—Ä—Å–∏–∏

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏

```json
{
  "categorization": {
    "rules": [
      {
        "category": "runtime",
        "matchers": [
          { "type": "exact", "values": ["react", "vue"] },
          { "type": "contains", "values": ["lodash", "axios"] },
          { "type": "pattern", "pattern": "^@types/", "category": "build" }
        ]
      }
    ]
  }
}
```

**–¢–∏–ø—ã –º–∞—Ç—á–µ—Ä–æ–≤:**
- `exact` - —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏
- `contains` - —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É
- `startsWith` - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞
- `pattern` - —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

### üìÅ –ì–∏–±–∫–∏–µ workspace –ø–∞—Ç—Ç–µ—Ä–Ω—ã

```json
{
  "workspacePatterns": [
    "packages/*/package.json",
    "apps/*/package.json",
    "tools/*/package.json",
    "libs/*/package.json"
  ]
}
```

### üè∑Ô∏è –£–º–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- `semantic-latest` - —Å–∞–º–∞—è –Ω–æ–≤–∞—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
- `latest` - –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ–¥–Ω—è—è
- `first` - –ø–µ—Ä–≤–∞—è –≤ —Å–ø–∏—Å–∫–µ (–∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)
- `manual` - —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

```json
{
  "versionConflictResolution": {
    "strategy": "semantic-latest",
    "options": {
      "preferStable": true,
      "allowPreReleases": false
    }
  }
}
```

### üì¶ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```json
{
  "dependencyTypes": {
    "include": ["dependencies", "devDependencies", "peerDependencies"],
    "exclude": ["optionalDependencies", "bundledDependencies"]
  }
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
node scripts/migrate-to-catalog-generic.js init-config
```

### 2. –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –° –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
node scripts/migrate-to-catalog-generic.js analyze

# –° –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
node scripts/migrate-to-catalog-generic.js analyze --config my-config.json
```

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è

```bash
# –° –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
node scripts/migrate-to-catalog-generic.js migrate

# –° –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
node scripts/migrate-to-catalog-generic.js migrate --config my-config.json
```

## üìã –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–º. `migrate-catalog.config.json` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å:
- 5 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (runtime, build, testing, development, docs)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –≤–µ—Ä—Å–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   node scripts/migrate-to-catalog-generic.js init-config
   ```

2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞** –ø–æ–¥ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ `migrate-catalog.config.json`

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–Ω–∞–ª–∏–∑:**
   ```bash
   node scripts/migrate-to-catalog-generic.js analyze
   ```

4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
   ```bash
   node scripts/migrate-to-catalog-generic.js migrate
   ```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä monorepo
- **–£–º–Ω–æ—Å—Ç—å** - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π
- **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
```
üì¶ Found 8 workspace packages
üì¶ Generated Catalogs:
Runtime Dependencies (catalog):
  fte.js-base: ^3.0.0-canary.ade27ca
  fte.js-parser: ^3.0.0-canary.ade27ca
  ...

build Dependencies:
  typescript: ^5.9.2
  ...
```

### Generic —Å–∫—Ä–∏–ø—Ç:
```
üì¶ Found 10 workspace packages
üì¶ Generated Catalogs:
Runtime Dependencies (catalog):
  chokidar: ^3.6.0
  commander: ^10.0.1
  fte.js-base: ^3.0.0-canary.ade27ca
  ...

build Dependencies:
  @babel/core: ^7.28.4
  @babel/generator: ^7.28.3
  typescript: ^5.9.2
  ...

development Dependencies:
  prettier: ^3.6.2
```

Generic –≤–µ—Ä—Å–∏—è –Ω–∞—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–µ –ø–∞–∫–µ—Ç–æ–≤, –ª—É—á—à–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —É–º–Ω–µ–µ!
