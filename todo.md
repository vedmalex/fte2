# todo

- посмотреть что можно сделать с блоками... переменные и прочие функции основного тела функции в них недоступны..., скорее всего их надо регистрировать внутри самой функции а не снаружи... в самом начале? или перед непосредственным использованием.... подумать

передавать options в шаблон

вынести все статически генерящиеся функции в контекст по-умолчанию
поработать с browser, код должен работать и в браузере
  swc? или esBuild?

- в блоки тоже передавать все те же параметры


комбинировать последовательность выражений uexpression/expressoin/text внутри codeblock
интерпретировать их как одно целове


идея, сделать
- бандлер шаблонов
  - шаблоы можно не загружать вместе с парсером
  -шаблоны скомпилировать и использовать отдельно от FTE

- standalone
  - режим для работы с одним файлом
    - скомпилировать шаблон
    - загрузить шаблон
    - использовать шаблон
  - сделать из шаблонов бандл

- прикрутить source-map для шаблонов

- сделать что-т она подобие tag- gql`` который будет принимать строку шаблона и выдавать результат

бандлы для шаблона можно использовать для уменьшения кодогенерации
- роуты сделать не статическими, а динамическими
  - обращение  роуту вызывает кодогенерацию шаблона, и возвращает новый сгенеренный код
  - можно проверять изменение данных и кодогенерить по актуальным данным, схема база данных
  - при генерации сохранять кэш, чтобы уменьшить время для генерации
  - кэш хранит crc объекта кодогенерации, если она изменилась, то нужно перегенерить
    - возможно даст существенный прирост производительности на sharan


посмотреть как можно сделать async шаблоны
сделать примеры для slot
- способ для формирования динамического контента, который не определен на этапе формирования шаблона
  - например  require модулей

посмотреть как можно улучшить slots


перенести обработку всех директив в Parser чтобы в шаблонизатор приходил уже обработанный код

шаблоны usechunks не могут быть использованы как partial

продумать как показывать ошибки пользователям в шаблоне, именно для этого было нужно сделать sourceMap
использовать async

ПОСМОТРЕТЬ
 <%_ ‘Whitespace Slurping’ Scriptlet tag, strips all whitespace before it
 -%> Trim-mode ('newline slurp') tag, trims following newline
 _%> ‘Whitespace Slurping’ ending tag, removes all whitespace after it

и пересмотреть то как я генерю тоже


убрать слишком длинне error stack

вернуть индент????

добавить в браузер parser

генерить сразу код в ESTree и получиться тоже с sourcemap?, и форматирование и все будет ок

сделать передачу в шаблон source map
или сделать геренацию pos line чтобы видеть где произошла ошибка
придумать!!!

вернуть пустой элемент и заменить его просто ";"

вернуть indent
- теперь когда можно распознать всю строку, нужно перед expression/uexpression проверять их индент, и до конца строки ставить его
  - индент нужно ставить начиная со второй строки
    - так отступ будет естественным
    - можно использовать позицию в текущей строке и по ней вычислять необходимый отступ


асинхронные шаблоны!!!!

ОТСТУПЫ!!!!
для генерации правильного кода для python например
если генерить шаблоны для fleet.dev

