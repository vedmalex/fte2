Test plan:
- format: trims trailing spaces, enforces final newline
- format: splits inline directive onto its own line
- lint: reports final-newline, no-trailing-whitespace, directive-on-own-line
